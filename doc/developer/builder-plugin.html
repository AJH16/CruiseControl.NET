<html>
<head>
  <title>How to build a custom CruiseControl.NET Builder Plug-in</title>
  <link type="text/css" rel="stylesheet" href="../cruisecontrol.css"/>
</head>
<body>
	<div style="float:right"><img src="../images/ccnet_logo_onwhite.gif"/></div>
	<h1>How to build a custom CruiseControl.NET Builder Plug-in</h1>
	<p/>
	<h2>Steps:</h2>
	<ol>
		<li>Create a Class Library project to build the assembly that will contain your custom builder plug-in.  The assembly that it produces should be
		named: 'ccnet.*.plugin.dll' (where the star represents the name you choose).</li>
		<li>Add your new customer builder class.</li>
		<li>The class must implement the <code>ThoughtWorks.CruiseControl.Core.IBuilder</code> interface (found in the ccnet.core assembly)</li>
		<li>Mark up your class with the NetReflector ReflectorType attribute.  The <code>name</code> argument supplied to the attribute is the name of the element/attribute that
		will appear in the configuration file</li>
		<li>Add whatever configuration properties you need, marking them up with NetRefelctor ReflectorProperty attributes accordingly.</li>
		<li>Implement the <code>Run</code> and the <code>ShouldRun</code> methods.
		<li>Compile the assembly.</li>
		<li>Copy the assembly into the folder containing the CruiseControl.NET assemblies (or the current directory that you are running the ccnet server from).</li>
		<li>Modify your <code>ccnet.config</code> file in accordance with the sample config file below.</li>
	</ol>
	For more information, please take a look at the sample code contained in the folder <code>/docs/developer/samples.</code>

	<h2>Sample Builder Class:</h2>
	<pre>
using System;
using Exortech.NetReflector;
using ThoughtWorks.CruiseControl.Core;

namespace ThoughtWorks.CruiseControl.Sample.Builder
{
	[ReflectorType("myBuilder")]
	public class NAntBuilder : IBuilder
	{
		public bool ShouldRun(IntegrationResult result)
		{
			return result.Working;
		}

		public void Run(IntegrationResult result)
		{
			Console.WriteLine("Hello World!");
		}
	}
}
	</pre>
	<h2>Sample Config File:</h2>
	<pre>
&lt;cruisecontrol&gt;
	&lt;project name="myproject"&gt;
		&lt;builder type="mybuilder"&gt;
			<span class="comment">&lt;!-- include custom builder properties here --&gt;</span>
		&lt;/builder&gt;
		<span class="comment">&lt;!-- include other project elements here --&gt;</span>
	&lt;/project&gt;
&lt;/cruisecontrol&gt;
</pre>
</body>
</html>
