<html>
    <head>
        <title>CruiseControl.NET : NUnitTask</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            CruiseControl.NET : NUnitTask
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on May 30, 2004 by <font color="#0050B2">svadagir@thoughtworks.com</font>.
				    </div>

				    <p class="paragraph">This task enables you to instruct CCNet to run the unit tests contained within a collection of assemblies.  The results of the unit tests will be automatically included in the CCNet build results.  This is especially useful if you have some unit tests that you want to run as part of the integration process, but you don&#039;t need as part of your developer build process.  For example, if you have a set of integration tests that you want to run in a separate build process, it is easy to set up a project to use this task.  And if you are using the <a href="http://confluence.public.thoughtworks.org/display/CCNET/DevEnvTask">DevEnvTask</a> and you want to run unit tests then the NUnitTask is for you.</p><h3 class="heading3"> Configuration Elements</h3>

<table class="wikitable">
<tr>
<th> Node </th><th> Description </th><th> Type </th><th> Required</th>
</tr><tr>
<td> assemblies </td><td> List of the paths to the assemblies containing the NUnit tests to be run. </td><td> string[] </td><td> true </td>
</tr><tr>
<td> path </td><td> Path of <b class="strong">nunit-console.exe</b> application. </td><td> string </td><td> true </td>
</tr>
</table>
<h3 class="heading3"> Configuration Example</h3><p class="paragraph">The configuration for the NUnitTask should be placed in the <b class="strong">&lt;tasks&gt;</b> section of the <a href="ccnet.config.html">ccnet.config</a> file.
<div class="code"><pre>&lt;tasks&gt;&#10;    	&lt;nunit&gt;&#10;    		&lt;path&gt;D&#58;&#92;dev&#92;ccnet&#92;ccnet&#92;tools&#92;nunit&#92;nunit&#45;console.exe&lt;/path&gt;&#10;    		&lt;assemblies&gt;&#10;    			&lt;assembly&gt;D&#58;&#92;dev&#92;Refactoring&#92;bin&#92;Debug&#92;Refactoring.exe&lt;/assembly&gt;&#10;    			&lt;assembly&gt;D&#58;&#92;dev&#92;Refactoring&#92;bin&#92;Debug&#92;Refactoring.Core.dll&lt;/assembly&gt;&#10;    		&lt;/assemblies&gt;&#10;    	&lt;/nunit&gt;&#10;    &lt;/tasks&gt;</pre></div></p><h3 class="heading3"> Availability</h3>
This task is available for CCNet Build 245 and above

				    
                                            <div class="tabletitle">
                            <a name="comments">Comments:</a>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-640"></a>
                                    <font class="smallfont"><p class="paragraph">I am using the most recent binary version of CruiseControl.NET, which I pulled from Sourceforge.  I have Nunit 2.1 installed at d:\nunit2.1.  After adding the nunit Configuration Example (and reconfiguring it for my project) to the ccnet.config file, the ccnet.exe application fails to start.  Here&#039;s a stack dump from the console:
<ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li> COPY OF CMD.EXE CONSOLE <hr class="line"/></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul><br/>
Microsoft Windows <a href="http://confluence.public.thoughtworks.org/display/CCNET/Version%2B5.2.3790">Version 5.2.3790</a><br/>
(C) Copyright 1985-2003 Microsoft Corp.</p>C:\Documents and Settings\Administrator&gt;d:<p class="paragraph">D:\&gt;cd CruiseControl.NET</p>D:\CruiseControl.NET&gt;cd server<p class="paragraph">D:\CruiseControl.NET\server&gt;ccnet<br/>
<a href="http://confluence.public.thoughtworks.org/display/CruiseControl Server/Error">CruiseControl Server:Error</a>: INTERNAL ERROR: Object cannot be stored in an arra<br/>
y of this type.
<hr class="line"/><br/>
System.InvalidCastException: Object cannot be stored in an array of this type.
   at System.Array.InternalSetValue(Object value, Int32 index1, Int32 index2, In<br/>
t32 index3)
   at Exortech.NetReflector.XmlArraySerialiser.Read(XmlNode node, Type instanceT<br/>
ype, NetReflectorTypeTable table)
   at Exortech.NetReflector.XmlMemberSerialiser.Read(XmlNode node, NetReflectorT<br/>
ypeTable table)
   at Exortech.NetReflector.XmlTypeSerialiser.ReadMembers(XmlNode node, Object i<br/>
nstance, NetReflectorTypeTable table)
   at Exortech.NetReflector.XmlTypeSerialiser.Read(XmlNode node, NetReflectorTyp<br/>
eTable table)
   at Exortech.NetReflector.NetReflector.Read(XmlNode node, NetReflectorTypeTabl<br/>
e table)
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationLoader.PopulateProject<br/>
sFromXml(XmlDocument configXml) in d:\sourceforge\ccnet\project\core\configurati<br/>
on\ConfigurationLoader.cs:line 111
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationLoader.Load() in d:\so<br/>
urceforge\ccnet\project\core\configuration\ConfigurationLoader.cs:line 60
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationContainer..ctor(IConfi<br/>
gurationLoader loader, IFileWatcher watcher) in d:\sourceforge\ccnet\project\cor<br/>
e\configuration\ConfigurationContainer.cs:line 20
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationContainer..ctor(String
 filename) in d:\sourceforge\ccnet\project\core\configuration\ConfigurationConta<br/>
iner.cs:line 14
   at ThoughtWorks.CruiseControl.Core.CruiseServerFactory.CreateLocal(String con<br/>
figFile) in d:\sourceforge\ccnet\project\core\CruiseServerFactory.cs:line 12
   at ThoughtWorks.CruiseControl.Core.CruiseServerFactory.Create(Boolean remote,
 String configFile) in d:\sourceforge\ccnet\project\core\CruiseServerFactory.cs:<br/>
line 22
   at ThoughtWorks.CruiseControl.Console.ConsoleRunner..ctor(ArgumentParser pars<br/>
er) in d:\sourceforge\ccnet\project\console\ConsoleRunner.cs:line 29
   at ThoughtWorks.CruiseControl.Console.ConsoleRunner.Main(String[] args) in d:<br/>
\sourceforge\ccnet\project\console\ConsoleRunner.cs:line 18
<hr class="line"/>
<ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li><ul type="square" class="minus">
<li> END COPY OF CONSOLE <hr class="line"/></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul><br/>
Any help would be greatly appreciated.</p>Thank you very much!</font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%">
                                        <img src="icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by  at May 12, 2004 17:19
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-697"></a>
                                    <font class="smallfont"><p class="paragraph">NUnit integration is not in the 0.6 Final release.  If you want the integration, you need to get the latest source code and build it.  The NUnit task was added May 12&#8230;</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%">
                                        <img src="icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by  at May 28, 2004 07:35
                                    </div>
                                </td>
                            </tr>
                                                        <tr>
                                <td  style="border-top: 1px dashed #666666">
                                    <a name="comment-698"></a>
                                    <font class="smallfont"><p class="paragraph">I get the above error message whenever I include this element in ccnet.config:</p>   &lt;tasks&gt;
    	&lt;mergeFiles&gt;
    		&lt;file&gt;C:\Program Files\CruiseControl.Net\website\log&#42;.xml&lt;/file&gt;
    	&lt;/mergeFiles&gt;
    &lt;/tasks&gt;<p class="paragraph">The element is as supplied in the ccnet.example.config file supplied in the distribtion zipfile (0.6 Final). The path referred to is valid.  There are log files there (possibly not the right sort, the documentation for this config file isn&#039;t very clear what I need).  Have other people encountered this?  Any clues how I might fix it?</p>Removing this clause allows ccnet.exe to run, but may be causing problems elsewhere I think - specifically, I can&#039;t get the project website to load, it throws an exception:<p class="paragraph"><a href="http://confluence.public.thoughtworks.org/display/CruiseControlException/Internal%2BError%2B-%2Bcouldn%2527t%2Bresolve%2Blogfile%2Bto%2Buse">CruiseControlException: Internal Error - couldn&#039;t resolve logfile to use</a>
   ThoughtWorks.CruiseControl.Web.WebUtil.ResolveLogFile(HttpContext context) in d:\sourceforge\ccnet\project\web\WebUtil.cs:16
   ThoughtWorks.CruiseControl.Web.Default.Page_Load(Object sender, EventArgs e) in d:\sourceforge\ccnet\project\web\Default.aspx.cs:32
   System.Web.UI.Control.OnLoad(EventArgs e) +67
   System.Web.UI.Control.LoadRecursive() +35
   System.Web.UI.Page.ProcessRequestMain() +731</p>The stack trace from ccnet.exe when invoked with the mergeFiles element present in its config, in full:<p class="paragraph">C:\Program Files\CruiseControl.Net\server&gt;ccnet.exe -config:ccnet.PaperRiver.con<br/>
fig -remoting:on<br/>
<a href="http://confluence.public.thoughtworks.org/display/CruiseControl Server/Error">CruiseControl Server:Error</a>: INTERNAL ERROR: Object cannot be stored in an array of this type.
<hr class="line"/><br/>
System.InvalidCastException: Object cannot be stored in an array of this type.
   at System.Array.InternalSetValue(Object value, Int32 index1, Int32 index2, Int32 index3)
   at Exortech.NetReflector.XmlArraySerialiser.Read(XmlNode node, Type instanceType, NetReflectorTypeTable table)
   at Exortech.NetReflector.XmlMemberSerialiser.Read(XmlNode node, NetReflectorTypeTable table)
   at Exortech.NetReflector.XmlTypeSerialiser.ReadMembers(XmlNode node, Object instance, NetReflectorTypeTable table)
   at Exortech.NetReflector.XmlTypeSerialiser.Read(XmlNode node, NetReflectorTypeTable table)
   at Exortech.NetReflector.NetReflector.Read(XmlNode node, NetReflectorTypeTable table)
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationLoader.PopulateProjectsFromXml(XmlDocument configXml) in d:\sourceforge\ccnet\project\core\configuration\ConfigurationLoader.cs:line 111
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationLoader.Load() in d:\sourceforge\ccnet\project\core\configuration\ConfigurationLoader.cs:line 60
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationContainer..ctor(IConfigurationLoader loader, IFileWatcher watcher) in d:\sourceforge\ccnet\project\core\configuration\ConfigurationContainer.cs:line 20
   at ThoughtWorks.CruiseControl.Core.Config.ConfigurationContainer..ctor(String filename) in d:\sourceforge\ccnet\project\core\configuration\ConfigurationContainer.cs:line 14
   at ThoughtWorks.CruiseControl.Core.CruiseServerFactory.CreateLocal(String configFile) in d:\sourceforge\ccnet\project\core\CruiseServerFactory.cs:line 12
   at ThoughtWorks.CruiseControl.Core.CruiseServerFactory.CreateRemote(String configFile) in d:\sourceforge\ccnet\project\core\CruiseServerFactory.cs:line 17
   at ThoughtWorks.CruiseControl.Core.CruiseServerFactory.Create(Boolean remote, String configFile) in d:\sourceforge\ccnet\project\core\CruiseServerFactory.cs:line 22
   at ThoughtWorks.CruiseControl.Console.ConsoleRunner..ctor(ArgumentParser parser) in d:\sourceforge\ccnet\project\console\ConsoleRunner.cs:line 29
   at ThoughtWorks.CruiseControl.Console.ConsoleRunner.Main(String[] args) in d:\sourceforge\ccnet\project\console\ConsoleRunner.cs:line 18
<hr class="line"/></p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%">
                                        <img src="icons/comment_16.gif" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by  at May 29, 2004 08:59
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on May 31, 2004 05:05</font></td>
		    </tr>
	    </table>
    </body>
</html>